<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>🚗 Car Wash: Promises & Async/Await</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <!-- Theory Section -->
      <div class="theory-section">
        <h1 class="theory-title">📚 Understanding Promises & Async/Await</h1>

        <div class="theory-grid">
          <div class="theory-card">
            <div class="theory-icon">🤝</div>
            <h3>What is a Promise?</h3>
            <p>
              A Promise is an object representing the eventual completion or
              failure of an asynchronous operation. It's like ordering food -
              you get a receipt (promise) immediately, but the food comes later.
            </p>
            <div class="code-snippet">
              <code
                >const promise = new Promise((resolve, reject) => { // Async
                operation here });</code
              >
            </div>
            <div class="theory-states">
              <span class="state pending">Pending ⏳</span>
              <span class="state fulfilled">Fulfilled ✓</span>
              <span class="state rejected">Rejected ✗</span>
            </div>
          </div>

          <div class="theory-card">
            <div class="theory-icon">⏰</div>
            <h3>What is Async/Await?</h3>
            <p>
              Async/await is syntactic sugar that makes Promises easier to work
              with. It lets you write asynchronous code that looks synchronous -
              making it much more readable!
            </p>
            <div class="code-snippet">
              <code
                >async function getData() { const result = await fetchData();
                return result; }</code
              >
            </div>
            <ul class="theory-points">
              <li><strong>async</strong> - Declares an async function</li>
              <li><strong>await</strong> - Pauses until Promise resolves</li>
            </ul>
          </div>

          <div class="theory-card">
            <div class="theory-icon">🔗</div>
            <h3>Why Use Them?</h3>
            <ul class="theory-points">
              <li>Handle API calls elegantly</li>
              <li>Avoid "callback hell"</li>
              <li>Better error handling with try/catch</li>
              <li>Sequential operations made simple</li>
              <li>Parallel operations with Promise.all()</li>
            </ul>
          </div>

          <div class="theory-card">
            <div class="theory-icon">🚗</div>
            <h3>The Car Wash Analogy</h3>
            <p>
              A car wash is the <strong>perfect metaphor</strong> for async
              operations:
            </p>
            <ul class="theory-points">
              <li><strong>Each stage</strong> = A Promise</li>
              <li><strong>Waiting</strong> = await keyword</li>
              <li><strong>Sequential stages</strong> = async/await chain</li>
              <li><strong>Multiple lanes</strong> = Promise.all()</li>
              <li><strong>Race mode</strong> = Promise.race()</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Header -->
      <div class="header">
        <h1>🚗 Car Wash Simulator</h1>
        <p>
          Interactive Demo: Learn Promises & Async/Await Through Sequential
          Operations
        </p>
        <div class="badge">
          👇 Watch how async/await makes each stage wait for the previous one!
        </div>
      </div>

      <!-- Control Panel -->
      <div class="control-panel">
        <h2>🎮 Control Panel</h2>
        <div class="button-grid">
          <button class="btn-standard" onclick="handleSingleWash('standard')">
            ▶️ Standard Wash
          </button>
          <button class="btn-express" onclick="handleSingleWash('express')">
            ⚡ Express Wash
          </button>
          <button class="btn-parallel" onclick="handleParallelWash()">
            ▶️ Wash All (Parallel)
          </button>
          <button class="btn-race" onclick="handleRaceWash()">
            🏆 Race Mode
          </button>
          <button class="btn-reset" onclick="handleReset()">🔄 Reset</button>
        </div>
      </div>

      <!-- Car Wash Lanes -->
      <div class="lanes-container">
        <div class="lane" id="lane-1">
          <div class="lane-header">
            <div class="lane-title">Lane 1</div>
            <div class="lane-status status-waiting">WAITING</div>
          </div>
          <div class="car-display">
            <div class="stage-effect" id="effect-1"></div>
            <div class="car-emoji" id="car-1">🚗</div>
          </div>
          <div class="progress-section">
            <div class="progress-info">
              <span class="progress-stage" id="stage-1">Ready to wash</span>
              <span class="progress-percent" id="percent-1">0%</span>
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar" id="progress-1" style="width: 0%"></div>
            </div>
          </div>
          <div class="error-message" id="error-1" style="display: none">
            ⚠️ Machine malfunction!
          </div>
        </div>

        <div class="lane" id="lane-2">
          <div class="lane-header">
            <div class="lane-title">Lane 2</div>
            <div class="lane-status status-waiting">WAITING</div>
          </div>
          <div class="car-display">
            <div class="stage-effect" id="effect-2"></div>
            <div class="car-emoji" id="car-2">🚙</div>
          </div>
          <div class="progress-section">
            <div class="progress-info">
              <span class="progress-stage" id="stage-2">Ready to wash</span>
              <span class="progress-percent" id="percent-2">0%</span>
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar" id="progress-2" style="width: 0%"></div>
            </div>
          </div>
          <div class="error-message" id="error-2" style="display: none">
            ⚠️ Machine malfunction!
          </div>
        </div>

        <div class="lane" id="lane-3">
          <div class="lane-header">
            <div class="lane-title">Lane 3</div>
            <div class="lane-status status-waiting">WAITING</div>
          </div>
          <div class="car-display">
            <div class="stage-effect" id="effect-3"></div>
            <div class="car-emoji" id="car-3">🚕</div>
          </div>
          <div class="progress-section">
            <div class="progress-info">
              <span class="progress-stage" id="stage-3">Ready to wash</span>
              <span class="progress-percent" id="percent-3">0%</span>
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar" id="progress-3" style="width: 0%"></div>
            </div>
          </div>
          <div class="error-message" id="error-3" style="display: none">
            ⚠️ Machine malfunction!
          </div>
        </div>
      </div>

      <!-- Bottom Section -->
      <div class="bottom-section">
        <!-- Activity Log -->
        <div class="activity-log">
          <h2 class="section-title">📋 Activity Log</h2>
          <div class="log-container" id="log-container">
            <div class="log-empty">
              Click a wash button to start the demo...
            </div>
          </div>
        </div>

        <!-- Stats Panel -->
        <div class="stats-panel">
          <h2 class="section-title">📊 Statistics</h2>
          <div class="stats-grid">
            <div class="stat-item">
              <span class="stat-label">Total Washes:</span>
              <span class="stat-value" id="total-washes">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Total Time:</span>
              <span
                class="stat-value"
                id="total-time"
                style="color: #10b981; font-size: 1.5rem"
                >0.0s</span
              >
            </div>
            <div>
              <span class="stat-label">Methods Used:</span>
              <div class="methods-used" id="methods-used"></div>
            </div>
          </div>

          <h2 class="section-title" style="margin-top: 30px">🔧 Wash Stages</h2>
          <div class="stages-list">
            <div class="stage-item">
              <div class="stage-emoji">💧</div>
              <div class="stage-info">
                <div class="stage-name">Pre-rinse</div>
                <div class="stage-duration">2 seconds</div>
              </div>
            </div>
            <div class="stage-item">
              <div class="stage-emoji">🫧</div>
              <div class="stage-info">
                <div class="stage-name">Soap</div>
                <div class="stage-duration">3 seconds</div>
              </div>
            </div>
            <div class="stage-item">
              <div class="stage-emoji">🌀</div>
              <div class="stage-info">
                <div class="stage-name">Scrub</div>
                <div class="stage-duration">4 seconds</div>
              </div>
            </div>
            <div class="stage-item">
              <div class="stage-emoji">💧</div>
              <div class="stage-info">
                <div class="stage-name">Rinse</div>
                <div class="stage-duration">2 seconds</div>
              </div>
            </div>
            <div class="stage-item">
              <div class="stage-emoji">💨</div>
              <div class="stage-info">
                <div class="stage-name">Dry</div>
                <div class="stage-duration">3 seconds</div>
              </div>
            </div>
            <div class="stage-item">
              <div class="stage-emoji">✨</div>
              <div class="stage-info">
                <div class="stage-name">Wax</div>
                <div class="stage-duration">2 seconds</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Learning Footer -->
      <div class="learning-footer">
        <h3>💡 Key Learning Points</h3>
        <div class="learning-grid">
          <div class="learning-item">
            <h4>🔄 Sequential (async/await)</h4>
            <p>
              Each stage waits for the previous to complete - perfect for
              dependent operations!
            </p>
          </div>
          <div class="learning-item">
            <h4>⚡ Parallel (Promise.all)</h4>
            <p>
              All lanes wash simultaneously - faster when operations are
              independent!
            </p>
          </div>
          <div class="learning-item">
            <h4>🏁 Race (Promise.race)</h4>
            <p>
              Returns when the first promise completes - useful for timeouts!
            </p>
          </div>
          <div class="learning-item">
            <h4>❌ Error Handling (try/catch)</h4>
            <p>Gracefully handle failures - machines can break!</p>
          </div>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
